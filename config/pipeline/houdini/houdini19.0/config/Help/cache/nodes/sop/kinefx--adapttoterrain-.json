{"type": "root", "attrs": {"type": "node", "context": "sop", "namespace": "kinefx", "internal": "adapttoterrain", "icon": "SOP/kinefx-adapttoterrain", "tags": "character, animation, retargeting", "since": "18.5", "version": ""}, "body": [{"level": 0, "type": "title", "indent": 0, "text": ["Adapt to Terrain"], "extent": [159, 180]}, {"type": "summary", "indent": 0, "text": ["Adapts a character\u2019s skeleton to conform to terrain."], "extent": [180, 241]}, {"type": "para", "indent": 0, "text": ["This node rays the provided hip and foot joints on to the input terrain and then runs a ", {"scheme": "Node", "value": "/nodes/sop/kinefx--fullbodyik", "type": "link", "text": "", "fullpath": "/nodes/sop/kinefx--fullbodyik"}, " on the whole skeleton to conform the whole character to the terrain properly."], "extent": [241, 438]}, {"level": 1, "id": "parameters", "container": true, "type": "parameters_section", "indent": 0, "role": "section", "extent": [438, 450], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Method"], "extent": [450, 459], "body": [{"type": "para", "indent": 4, "text": ["Choose method of projection."], "extent": [459, 493]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["Direction Vector"], "extent": [493, 515], "body": [{"type": "para", "indent": 8, "text": ["Specify a direction vector to use for projecting. "], "extent": [515, 575]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 8, "text": ["Direction"], "extent": [575, 594], "body": [{"type": "para", "indent": 12, "text": ["The projection will happen from the character\u2019s position in the direction of this specified direction vector."], "extent": [594, 717]}], "container": true}], "container": true}], "container": true}, {"type": "dt", "indent": 4, "text": ["From Attribute"], "extent": [717, 737], "body": [{"type": "para", "indent": 8, "text": ["Specify a vector attribute name that will be used for projecting."], "extent": [737, 812]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 8, "text": ["Attribute"], "extent": [812, 831], "body": [{"type": "para", "indent": 12, "text": ["Name of the attribute to read the projection direction data from."], "extent": [831, 910]}], "container": true}], "container": true}], "container": true}, {"type": "dt", "indent": 4, "text": ["From Terrain Attribute"], "extent": [910, 938], "body": [{"type": "para", "indent": 8, "text": ["Specify a vector attribute name from the terrain input that will be used for projecting."], "extent": [938, 1036]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 8, "text": ["Terrain Attribute"], "extent": [1036, 1063], "body": [{"type": "para", "indent": 12, "text": ["Name of the attribute from the terrain input to read the projection direction data from."], "extent": [1063, 1165]}], "container": true}, {"type": "dt", "indent": 8, "text": ["Projection Change Threshold Degrees"], "extent": [1165, 1210], "body": [{"type": "para", "indent": 12, "text": ["Amount of degrees needed to consider changing the projection attribute.\n            For an example where the terrain is a hilly surface with multiple projection attribute values spread across its surface, it can be useful to limit the amount of projection changes to major terrain differences."], "extent": [1210, 1517]}], "container": true}], "container": true}], "container": true}], "container": true}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Ground Plane"], "extent": [1517, 1531], "body": [{"type": "para", "indent": 4, "text": ["Specify which plane acts as the ground plane."], "extent": [1531, 1582]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Rotate Skeleton"], "extent": [1582, 1599], "body": [{"type": "para", "indent": 4, "text": ["Rotate the character around its own bounding box center before projecting it.\n    Normally, each specified hip or foot joint gets projected on to the terrain following the direction vector. In most cases, this means that the projection will not be perpendicular to the surface of the terrain. In certain situations the result can be less stretchy - especially for quadrupeds - if the character is rotated before being projected. The effect is the same as rotating the projection direction vector with the minor exception that the projection will have no position offset."], "extent": [1599, 2175]}], "container": true, "role": "item"}], "container": true, "role": "item_group"}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Main"], "extent": [2175, 2186], "body": [{"level": 3, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Hips"], "extent": [2186, 2200], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Hip Joint"], "extent": [2200, 2212], "body": [{"type": "para", "indent": 4, "text": ["Specify the hip joint of the character by name.\n    Multiple hip joints can be specified. For example, in case of a quadruped you will want to select both the pelvis as well as the chest joints as to both front and back legs are touching the terrain and will have to be projected."], "extent": [2212, 2498]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Hip Offset"], "extent": [2498, 2510], "body": [{"type": "para", "indent": 4, "text": ["Offsets the hip joint after it has been projected on to the terrain."], "extent": [2510, 2584]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Hip Lean Blend"], "extent": [2584, 2600], "body": [{"type": "para", "indent": 4, "text": ["Enable or disable hip leaning for this hip joint and control the amount of leaning."], "extent": [2600, 2689]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Hip Axis"], "extent": [2689, 2699], "body": [{"type": "para", "indent": 4, "text": ["Specify a custom axis to rotate the hip joint around. \n    The axis will be automatically computed. This option allows you to overwrite that computation.\n    The axis expected is the ", {"type": "q", "text": ["front"]}, " axis of the hip joint. If we think of the up axis as the axis pointing towards the sky, then the forward axis is pointing towards the character\u2019s front."], "extent": [2699, 3048]}], "container": true, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 3, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Lower Limbs"], "extent": [3048, 3068], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Knee Joint"], "extent": [3068, 3081], "body": [{"type": "para", "indent": 4, "text": ["Specify the knee joint of the character\u2019s leg by name."], "extent": [3081, 3141]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Ankle Joint"], "extent": [3141, 3154], "body": [{"type": "para", "indent": 4, "text": ["Specify the ankle joint of the character\u2019s leg by name."], "extent": [3154, 3215]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Toe Joint"], "extent": [3215, 3226], "body": [{"type": "para", "indent": 4, "text": ["Specify the toe joint of the character\u2019s foot by name. This field is optional. The toe joint is used to get the proper rotation of the ankle joint after it has been projected."], "extent": [3226, 3407]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Ankle Offset"], "extent": [3407, 3421], "body": [{"type": "para", "indent": 4, "text": ["Offsets the ankle joint after it has been projected on to the terrain."], "extent": [3421, 3497]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Toe Offset"], "extent": [3497, 3509], "body": [{"type": "para", "indent": 4, "text": ["Offsets the toe joint after it has been projected on to the terrain."], "extent": [3509, 3583]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Foot Lift Blend"], "extent": [3583, 3600], "body": [{"type": "para", "indent": 4, "text": ["Enable or disable terrain-based foot lifting for this ankle joint and control the amount of lifting."], "extent": [3600, 3706]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Ankle Lookat Axis"], "extent": [3706, 3725], "body": [{"type": "para", "indent": 4, "text": ["Specify a custom axis to rotate the ankle joint around. \n    The axis will be automatically computed. This option allows you to overwrite that computation.\n    The axis expected is the axis of the ankle joint that is pointing at the toe joint."], "extent": [3725, 3974]}], "container": true, "role": "item"}], "container": true, "role": "item_group"}]}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Advanced"], "extent": [3974, 3989], "body": [{"level": 3, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Hip Options"], "extent": [3989, 4010], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Enable Leaning"], "extent": [4010, 4027], "body": [{"type": "para", "indent": 4, "text": ["Enable hip leaning forward or backward when the projected character is ascending or descending a slope."], "extent": [4027, 4136]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Hip Lean Range"], "extent": [4136, 4152], "body": [{"type": "para", "indent": 4, "text": ["Specify how much the hips can rotate backward and forward."], "extent": [4152, 4216]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Max Rotation Per Frame"], "extent": [4216, 4240], "body": [{"type": "para", "indent": 4, "text": ["Specify the maximum amount, in degrees, that the hip joints can rotate each frame."], "extent": [4240, 4328]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Max Translation Per Frame"], "extent": [4328, 4355], "body": [{"type": "para", "indent": 4, "text": ["Specify the maximum amount that the hip joints can translate each frame."], "extent": [4355, 4433]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Spine Extension"], "extent": [4433, 4450], "body": [{"type": "para", "indent": 4, "text": ["When dealing with quadrupeds or characters with multiple hip-like joints, this option limits the amount of extension that can occur in the spine as a result of the projection. A value of 0 means that no extension is allowed, a value of 1 means that any amount of extension is allowed."], "extent": [4450, 4740]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Spine Compression"], "extent": [4740, 4759], "body": [{"type": "para", "indent": 4, "text": ["When dealing with quadrupeds or characters with multiple hip-like joints, this option limits the amount of compression that can occur in the spine as a result of projecting. A value of 0 means that no compression is allowed, a value of 1 means that any amount of compression is allowed."], "extent": [4759, 5051]}], "container": true, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 3, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Leg Options"], "extent": [5051, 5071], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Enable Ankle To Toe Lookat"], "extent": [5071, 5100], "body": [{"type": "para", "indent": 4, "text": ["Rotate the ankle joints to look at the toe joints.\n    When projected on to a surface, this will basically orient the foot to match the surface."], "extent": [5100, 5250]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Enable Terrain-Based Foot Lift"], "extent": [5250, 5282], "body": [{"type": "para", "indent": 4, "text": ["Enable lifting the feet based on the terrain slope.\n    This option will adjust the step height of the input animation in accordance to the terrain underneath. A steep ascending slope will make a step rise higher - a steep descending slope will make it sink lower."], "extent": [5282, 5552]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Foot Lift Blend"], "extent": [5552, 5569], "body": [{"type": "para", "indent": 4, "text": ["Control the global value of the foot lift. A value of 0 means no foot lift, a value of 1 means maximum foot lift."], "extent": [5569, 5688]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Position Stabilization Attribute Name"], "extent": [5688, 5727], "body": [{"type": "para", "indent": 4, "text": ["Specify the name of the ", {"scheme": "Node", "value": "/nodes/sop/kinefx--stabilizejoint", "type": "link", "text": "", "fullpath": "/nodes/sop/kinefx--stabilizejoint"}, " position output attribute name that will be used to find all the foot steps in the animation."], "extent": [5727, 5884]}], "container": true, "role": "item"}], "container": true, "role": "item_group"}]}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Solve"], "extent": [5884, 5896], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Solve"], "extent": [5896, 5904], "body": [{"type": "para", "indent": 4, "text": ["Use a ", {"scheme": "Node", "value": "/nodes/sop/kinefx--fullbodyik", "type": "link", "text": "", "fullpath": "/nodes/sop/kinefx--fullbodyik"}, " to solve internally and output the result."], "extent": [5904, 5988]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Use Toes as Drivers"], "extent": [5988, 6009], "body": [{"type": "para", "indent": 4, "text": ["Use toe joints, if specified, as fullbodyik drivers. Otherwise, only the hip and foot joints will be used."], "extent": [6009, 6121]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Iterations"], "extent": [6121, 6133], "body": [{"type": "para", "indent": 4, "text": ["See ", {"scheme": "Node", "value": "/nodes/sop/kinefx--fullbodyik", "type": "link", "text": "", "fullpath": "/nodes/sop/kinefx--fullbodyik"}, "."], "extent": [6133, 6173]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Damping"], "extent": [6173, 6182], "body": [{"type": "para", "indent": 4, "text": ["See ", {"scheme": "Node", "value": "/nodes/sop/kinefx--fullbodyik", "type": "link", "text": "", "fullpath": "/nodes/sop/kinefx--fullbodyik"}, "."], "extent": [6182, 6222]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Tolerance"], "extent": [6222, 6233], "body": [{"type": "para", "indent": 4, "text": ["See ", {"scheme": "Node", "value": "/nodes/sop/kinefx--fullbodyik", "type": "link", "text": "", "fullpath": "/nodes/sop/kinefx--fullbodyik"}, "."], "extent": [6233, 6273]}], "container": true, "role": "item"}], "container": true, "role": "item_group"}, {"level": 3, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Configurations"], "extent": [6273, 6296], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Default Configurations"], "extent": [6296, 6321], "body": [{"type": "para", "indent": 4, "text": ["Initialize a set of default configurations for the ", {"scheme": "Node", "value": "/nodes/sop/kinefx--fullbodyik", "type": "link", "text": "", "fullpath": "/nodes/sop/kinefx--fullbodyik"}, "."], "extent": [6321, 6408]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Output Configuration Attributes"], "extent": [6408, 6441], "body": [{"type": "para", "indent": 4, "text": ["Enabling this will output the ", {"scheme": "Node", "value": "/nodes/sop/kinefx--fullbodyik", "type": "link", "text": "", "fullpath": "/nodes/sop/kinefx--fullbodyik"}, " configuration attributes."], "extent": [6441, 6532]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Target Configurations"], "extent": [6532, 6555], "body": [{"type": "para", "indent": 4, "text": ["See ", {"scheme": "Node", "value": "/nodes/sop/kinefx--fbikconfiguretargets", "type": "link", "text": "", "fullpath": "/nodes/sop/kinefx--fbikconfiguretargets"}], "extent": [6555, 6604]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Joint Configurations"], "extent": [6604, 6626], "body": [{"type": "para", "indent": 4, "text": ["See ", {"scheme": "Node", "value": "/nodes/sop/kinefx--configurejoints", "type": "link", "text": "", "fullpath": "/nodes/sop/kinefx--configurejoints"}], "extent": [6626, 6670]}], "container": true, "role": "item"}], "container": true, "role": "item_group"}]}]}], "text": "Parameters"}, {"level": 1, "id": "inputs", "container": true, "type": "inputs_section", "indent": 0, "role": "section", "extent": [6670, 6678], "body": [{"type": "dt_group", "body": [{"type": "dt", "indent": 0, "text": ["Target Skeleton"], "extent": [6678, 6696], "body": [{"type": "para", "indent": 4, "text": ["The input skeleton to adapt."], "extent": [6696, 6730]}], "container": true}, {"type": "dt", "indent": 0, "text": ["MotionClip"], "extent": [6730, 6742], "body": [{"type": "para", "indent": 4, "text": ["The animated input skeleton, in the form of ", {"scheme": "Node", "value": "/nodes/sop/kinefx--motionclip", "type": "link", "text": "", "fullpath": "/nodes/sop/kinefx--motionclip"}, ". This input can be useful if you want to modify the transforms of the driver joints before adapting them to the ", {"type": "strong", "text": ["Terrain"]}, " and solving the ", {"type": "strong", "text": ["Target Skeleton"]}, " using a ", {"scheme": "Node", "value": "/nodes/sop/kinefx--fullbodyik", "type": "link", "text": "", "fullpath": "/nodes/sop/kinefx--fullbodyik"}, ". A common example is to use the ", {"scheme": "Node", "value": "/nodes/sop/kinefx--stabilizejoint", "type": "link", "text": "", "fullpath": "/nodes/sop/kinefx--stabilizejoint"}, " to plant the feet, set the ", {"type": "strong", "text": ["Mode"]}, " to ", {"type": "strong", "text": ["Pass Through"]}, " and wire the ", {"type": "strong", "text": ["Target Skeleton"]}, " to the ", {"type": "strong", "text": ["Target Skeleton"]}, " and the ", {"type": "strong", "text": ["MotionClip"]}, " to the ", {"type": "strong", "text": ["MotionClip"]}, "."], "extent": [6742, 7231]}], "container": true}, {"type": "dt", "indent": 0, "text": ["Terrain"], "extent": [7231, 7240], "body": [{"type": "para", "indent": 4, "text": ["The terrain geometry to adapt the ", {"type": "strong", "text": ["Target Skeleton"]}, " to."], "extent": [7240, 7301]}], "container": true}], "container": true}], "text": "Inputs"}, {"level": 1, "id": "outputs", "container": true, "type": "outputs_section", "indent": 0, "role": "section", "extent": [7301, 7310], "body": [{"type": "dt_group", "body": [{"type": "dt", "indent": 0, "text": ["Target Skeleton"], "extent": [7310, 7328], "body": [{"type": "para", "indent": 4, "text": ["The adapted input skeleton."], "extent": [7328, 7361]}], "container": true}, {"type": "dt", "indent": 0, "text": ["Motion Trails"], "extent": [7361, 7376], "body": [{"type": "para", "indent": 4, "text": ["The motion trails of the driver joints: Hip Joints and Leg Joints. In certain situations, you will want to manipulate the result of the this node further, without using the ", {"scheme": "Node", "value": "/nodes/sop/kinefx--fullbodyik", "type": "link", "text": "", "fullpath": "/nodes/sop/kinefx--fullbodyik"}, " inside to solve. For these situations, you can use the motion trails output, manipulate them and then solve later."], "extent": [7376, 7699]}], "container": true}], "container": true}], "text": "Outputs"}, {"level": 1, "id": "related", "container": true, "type": "related_section", "indent": 0, "role": "section", "extent": [7699, 7708], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/sop/kinefx--stabilizejoint", "type": "link", "text": "", "fullpath": "/nodes/sop/kinefx--stabilizejoint"}], "extent": [7708, 7747]}], "container": true}], "text": "Related"}], "title": ["Adapt to Terrain"], "summary": ["Adapts a character\u2019s skeleton to conform to terrain."]}